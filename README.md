## 乐居商城（前端）

一个基于 Vue 3 + TypeScript + Vite 的电商前端示例项目，包含首页/分类/商品详情/购物车/结算/支付（模拟）/用户登录注册/用户中心/信息页/页脚/地址簿等核心模块，适配 PC 端。

### 功能概览
- 导航与全局
  - 固定顶部导航栏（置顶、阴影、登录后用户中心下拉、延时关闭避免闪烁）
  - 登录/注册切换：未登录显示“登录/注册”，登录后显示“用户中心”与头像（带占位与失败回退）
  - 购物车徽标数量实时显示，点击进入购物车页
- 首页（电商风格）
  - 顶部搜索横幅（搜索框、热词快捷键、右侧视觉横幅）
  - 促销条（包邮/新人券/退换/次日达）
  - 分类导航（粘性定位）+ 商品网格
  - 商品列表分页（每页 9 条，上一页/下一页，右侧对齐）
  - 商品卡片：主图、标题、价格/原价、评分、加入购物车
- 商品详情页
  - 图片/标题/价格/简介、数量选择、加入购物车、立即购买（跳转结算）
- 购物车
  - 列表、数量增减、删除、清空、金额合计、侧边汇总栏（粘性）
  - 去结算按钮（跳转结算页）
- 结算页
  - 收货表单：收货人、手机号（严格 11 位）、省/市/区（级联示例）、详细地址、是否开票、配送/支付方式
  - 订单摘要：清单、商品金额、运费（满 199 包邮）、应付金额
  - 支付入口按钮（支付宝/微信/银行卡）：表单未通过校验时禁用
  - 地址簿：本地持久化，多地址、设默认、删除、一键回填、内联编辑、保存成功/删除成功轻提示
- 支付页（模拟）
  - 路由：`/pay/alipay`、`/pay/wechat`、`/pay/card`
  - 展示订单号、金额、二维码（30s 自动刷新 + 手动刷新按钮），“我已完成支付”后弹出成功并清空购物车返回首页
- 用户认证
  - 登录页面：全屏背景、表单、记住我（前端示例逻辑）
  - 注册页面：表单校验、服务条款弹窗（打开后 5s 才能关闭）
  - 自定义消息弹窗组件（右上角关闭 X）
- 用户中心与信息页
  - 用户中心：展示头像/昵称/邮箱/用户 ID，玻璃拟态风格，按钮返回首页/退出登录
  - 信息页：关于我们、加入我们、联系我们、媒体报道、帮助中心、配送与运费、售后与退换、发票制度、新手指引、账户安全、支付方式、优惠政策
- 页脚
  - 服务条、信息列、订阅输入、社交按钮
  - `router-link` 跳转信息页，“联系我们”快捷弹窗（自定义模态框）

### 技术栈
- 构建：Vite 7
- 语言：TypeScript 5、Vue 3（`<script setup>`）
- 路由：Vue Router 4
- 样式：原子化 CSS 未使用，项目内自定义样式（支持响应式）
- 校验：原生校验 + 正则（手机号 11 位）
- 状态：轻量自研 store（`src/stores/*`，localStorage 持久化）

### 启动与构建
```bash
# 安装依赖
npm install

# 开发启动（默认 http://localhost:5173）
npm run dev

# 类型检查
npm run type-check

# 生产构建
npm run build

# 本地预览构建产物
npm run preview
```

### 目录结构（关键文件）
```
study-v1/
  ├─ src/
  │  ├─ components/
  │  │  ├─ HomePage.vue              # 首页（搜索/分类/网格/分页/页脚）
  │  │  ├─ ProductDetailPage.vue     # 商品详情页
  │  │  ├─ CartPage.vue              # 购物车
  │  │  ├─ CheckoutPage.vue          # 结算页（严格校验、地址簿、支付入口）
  │  │  ├─ NavBar.vue                # 顶部导航（登录/头像/用户中心下拉）
  │  │  ├─ SiteFooter.vue            # 页脚（信息页路由、联系我们模态）
  │  │  ├─ LoginPage.vue             # 登录页
  │  │  ├─ RegisterPage.vue          # 注册页（服务条款 5s 弹窗）
  │  │  ├─ ProfilePage.vue           # 用户中心
  │  │  ├─ pay/
  │  │  │  ├─ PayAlipay.vue
  │  │  │  ├─ PayWeChat.vue
  │  │  │  ├─ PayCard.vue
  │  │  │  └─ pay.css
  │  │  ├─ AboutPage.vue CareersPage.vue ContactPage.vue PressPage.vue
  │  │  ├─ HelpPage.vue ShippingPage.vue ReturnsPage.vue InvoicePage.vue
  │  │  ├─ GuidePage.vue SecurityPage.vue PaymentPage.vue PromotionsPage.vue
  │  ├─ stores/
  │  │  ├─ userStore.ts    # 登录状态、用户信息（localStorage）
  │  │  ├─ cartStore.ts    # 购物车（添加/更新/删除/清空、total 计算、持久化）
  │  │  ├─ addressStore.ts # 地址簿（增删改、设默认、持久化）
  │  │  └─ catalogStore.ts # 商品目录（示例数据 + getById）
  │  ├─ router/index.ts    # 路由与守卫（受保护路由跳转登录）
  │  ├─ assets/            # 样式与资源
  │  ├─ App.vue            # 路由视图
  │  └─ main.ts            # 创建应用、安装路由
  └─ README.md
```

### 使用指南（核心流程）
- 登录/注册
  - 顶部“登录/注册”进入对应页面；注册页服务条款弹窗需 5s 后可关闭
- 浏览与搜索
  - 首页可按分类筛选、关键字过滤、排序；分页每页 9 条
  - 点击商品图片或标题进入详情页
- 购物车
  - 商品卡/详情页可加入购物车；右上角徽标数量更新
  - 购物车页支持数量加减、删除、清空，“去结算”进入结算页
- 结算与支付
  - 结算页需填写姓名、11 位手机号、省/市/区/详细地址（校验不通过无法进入支付页）
  - 地址簿可一键回填/编辑/设默认/删除，“保存到地址簿”支持设默认与轻提示
  - 选择支付方式跳转至对应支付页；二维码 30s 自动刷新 + 手动刷新；支付完成弹窗并返回首页
- 用户中心
  - 登录后导航右侧展示用户中心下拉，进入可查看资料或退出登录

### 路由一览（部分）
- 首页：`/`
- 详情：`/product/:id`
- 购物车：`/cart`
- 结算：`/checkout`
- 支付：`/pay/alipay`、`/pay/wechat`、`/pay/card`
- 登录/注册/用户：`/login`、`/register`、`/profile`
- 信息页：`/about`、`/careers`、`/contact`、`/press` 等

### 配置与扩展建议
- 数据源
  - 当前使用 `catalogStore` 的示例数据；可替换为后端 API：
    - 在首页与详情页统一通过 API 获取列表/详情（或 SSR）
- 校验
  - 建议接入 `vee-validate + yup` 进行规则化表单校验与错误提示
- 状态管理
  - 可迁移到 Pinia，配合持久化插件与模块化 store
- 工程化
  - ESLint + Prettier + stylelint 统一规范
  - Vitest 单元测试（store/工具），Playwright/Cypress E2E（购→结算→支付）
  - CI/CD（构建/测试/lint/预览），生产资源优化（分包、压缩、缓存）

### 已知限制
- 支付为模拟场景，二维码为公共二维码服务生成（演示用）；实际需后端下单返回二维码并轮询交易状态
- 登录/注册为前端示例流程，实际应接入后端认证与 token 管理
- 省市区为示例静态数据，建议替换为真实行政区划接口

### 贡献
欢迎提交 Issue 与 PR，一起完善电商前端最佳实践示例。
